# pgsql-enums

<p align="center" width="100%">
  <img height="120" src="https://github.com/launchql/pgsql-parser/assets/545047/6440fa7d-918b-4a3b-8d1b-755d85de8bea" />
</p>

<p align="center" width="100%">
  <a href="https://github.com/launchql/pgsql-parser/actions/workflows/run-tests.yaml">
    <img height="20" src="https://github.com/launchql/pgsql-parser/actions/workflows/run-tests.yaml/badge.svg" />
  </a>
   <a href="https://www.npmjs.com/package/pgsql-enums"><img height="20" src="https://img.shields.io/npm/dt/pgsql-enums"></a>
   <a href="https://www.npmjs.com/package/pgsql-enums"><img height="20" src="https://img.shields.io/npm/dw/pgsql-enums"/></a>
   <a href="https://github.com/launchql/pgsql-parser/blob/main/LICENSE-MIT"><img height="20" src="https://img.shields.io/badge/license-MIT-blue.svg"/></a>
   <a href="https://www.npmjs.com/package/pgsql-enums"><img height="20" src="https://img.shields.io/github/package-json/v/launchql/pgsql-parser?filename=packages%2Fenums-json%2Fpackage.json"/></a>
</p>

This is a helper package for `pgsql-parser`. it provides `getEnum` function, and contains the Postgres Enums as JSON baked into the package

`pgsql-enums` is a utility package designed to support `pgsql-parser` by providing easy access to PostgreSQL enumeration types in JSON format. This package facilitates the conversion between string and integer representations of PostgreSQL enums, enhancing the usability of ASTs generated by `pgsql-parser`.

**NOTE:** This is the legacy library for helpers and enums for `pgsql-parser`, created long before [pg-proto-parser](https://github.com/launchql/pg-proto-parser) was developed. The plan is to gradually deprecate this library and transition towards using `@pgsql/enums` and `@pgsql/utils` for more modern and efficient PostgreSQL parsing and utility functions.

## Features

- **Enum Conversion**: Offers functions to convert PostgreSQL enums from string to integer and vice versa.
- **Predefined Enums**: Contains predefined JSON mappings for PostgreSQL enums, readily accessible for use in your projects.
- **Easy Integration**: Designed to work seamlessly with [`pgsql-parser`](https://github.com/launchql/pgsql-parser), simplifying the handling of enum values in the AST.

## Installation

```bash
npm install pgsql-enums
```

## Usage

```ts
import { toInt, toStr } from 'pgsql-enums';

const str = toStr['A_Expr_Kind']['10']; // Returns the string representation of the enum value 10
const num = toInt['A_Expr_Kind']['AEXPR_LIKE']; // Returns the numeric representation of the enum value 'AEXPR_LIKE'
```

## Enums JSON Structure

Enums are provided in two JSON structures: one for converting from string to integer and another for converting from integer to string.

### String to Integer

```json
{
  "A_Expr_Kind": {
    "AEXPR_OP": 0,
    "AEXPR_OP_ANY": 1,
    ...
  }
}
```

### Integer to String

```json
{
  "A_Expr_Kind": {
    "0": "AEXPR_OP",
    "1": "AEXPR_OP_ANY",
    ...
  }
}
```

## Helpers

### `TYPE_NAMES`

A constant object mapping PostgreSQL internal object type identifiers to their readable names. Use this to convert type codes into human-readable format.

```ts
import { TYPE_NAMES } from 'pgsql-enums';

console.log(TYPE_NAMES.OBJECT_TABLE); // Outputs 'TABLE'
console.log(TYPE_NAMES.OBJECT_INDEX); // Outputs 'INDEX'
console.log(TYPE_NAMES.OBJECT_VIEW); // Outputs 'VIEW'

```

### `objtypeName`

```ts
import { objtypeName } from 'pgsql-enums';

console.log(objtypeName('OBJECT_TABLE')); // Outputs 'TABLE'
console.log(objtypeName('OBJECT_INDEX')); // Outputs 'INDEX'
console.log(objtypeName('OBJECT_VIEW')); // Outputs 'VIEW'

```


### `getConstraintFromConstrType`

```ts
import { getConstraintFromConstrType } from 'pgsql-enums';

console.log(getConstraintFromConstrType('CONSTR_PRIMARY')); // Outputs 'PRIMARY KEY'
console.log(getConstraintFromConstrType('CONSTR_UNIQUE')); // Outputs 'UNIQUE'
console.log(getConstraintFromConstrType('CONSTR_CHECK')); // Outputs 'CHECK'
```

## Related

* [pgsql-parser](https://github.com/launchql/pgsql-parser): The real PostgreSQL parser for Node.js, providing symmetric parsing and deparsing of SQL statements with actual PostgreSQL parser integration.
* [pgsql-deparser](https://github.com/launchql/pgsql-parser/tree/main/packages/deparser): A streamlined tool designed for converting PostgreSQL ASTs back into SQL queries, focusing solely on deparser functionality to complement `pgsql-parser`.
* [pgsql-enums](https://github.com/launchql/pgsql-parser/tree/main/packages/pgsql-enums): A utility package offering easy access to PostgreSQL enumeration types in JSON format, aiding in string and integer conversions of enums used within ASTs to compliment `pgsql-parser`
* [@pgsql/enums](https://github.com/launchql/pgsql-parser/tree/main/packages/enums): Provides PostgreSQL AST enums in TypeScript, enhancing type safety and usability in projects interacting with PostgreSQL AST nodes.
* [@pgsql/types](https://github.com/launchql/pgsql-parser/tree/main/packages/types): Offers TypeScript type definitions for PostgreSQL AST nodes, facilitating type-safe construction, analysis, and manipulation of ASTs.
* [@pgsql/utils](https://github.com/launchql/pgsql-parser/tree/main/packages/utils): A comprehensive utility library for PostgreSQL, offering type-safe AST node creation and enum value conversions, simplifying the construction and manipulation of PostgreSQL ASTs.
* [pg-proto-parser](https://github.com/launchql/pg-proto-parser): A TypeScript tool that parses PostgreSQL Protocol Buffers definitions to generate TypeScript interfaces, utility functions, and JSON mappings for enums.
* [libpg-query](https://github.com/launchql/libpg-query-node): The real PostgreSQL parser exposed for Node.js, used primarily in `pgsql-parser` for parsing and deparsing SQL queries.

## Disclaimer

AS DESCRIBED IN THE LICENSES, THE SOFTWARE IS PROVIDED “AS IS”, AT YOUR OWN RISK, AND WITHOUT WARRANTIES OF ANY KIND.

No developer or entity involved in creating Software will be liable for any claims or damages whatsoever associated with your use, inability to use, or your interaction with other users of the Software code or Software CLI, including any direct, indirect, incidental, special, exemplary, punitive or consequential damages, or loss of profits, cryptocurrencies, tokens, or anything else of value.